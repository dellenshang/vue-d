(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-45158200"],{"0d41":function(t,e,n){"use strict";n.r(e);var a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),r=n("2f62"),o=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"org-tree",class:{horizontal:t.horizontal,collapsable:t.collapsable}},[n("org-tree-node",t._b({attrs:{data:t.dataCloned,props:t.props,horizontal:t.horizontal,"label-width":t.labelWidth,collapsable:t.collapsable,"node-render":t.nodeRender,"button-render":t.buttonRender,"label-class-name":t.labelClassName},on:{"on-expand":t.handleExpand,"on-node-click":t.handleNodeClick}},"org-tree-node",t.$listeners,!1))],1)}),i=(n("c5f6"),function(t,e){return!(Array.isArray(t[e])&&t[e].length>0)}),s=function(t,e,n){var a=n.props,r=["org-tree-node"],o=[],s=e[a.props.children];return i(e,a.props.children)?r.push("is-leaf"):a.collapsable&&!e[a.props.expand]&&r.push("collapsed"),o.push(l(t,e,n)),a.collapsable&&!e[a.props.expand]||o.push(c(t,s,n)),t("div",{domProps:{className:r.join(" ")}},o)},l=function(t,e,n){var a=n.props,r=e[a.props.label],o=a.nodeRender,s=n.listeners["on-node-click"],l=n.listeners["on-node-mousedown"],c=n.listeners["on-node-mouseup"],d=n.listeners["on-node-touchstart"],p=n.listeners["on-node-touchleave"],u=[];if("function"==typeof o){var h=o(t,e);h&&u.push(h)}else u.push(r);a.collapsable&&!i(e,a.props.children)&&u.push(function(t,e,n){var a=n.props,r=n.listeners["on-expand"],o=["org-tree-node-btn"];return e[a.props.expand]&&o.push("expanded"),t("span",{class:"org-tree-button-wrapper",on:{click:function(t){t.stopPropagation(),r&&r(e)}}},[a.buttonRender?a.buttonRender(t,e):t("span",{class:o.join(" ")})])}(t,e,n));var f=["org-tree-node-label-inner"],b=a.labelWidth,_=a.labelClassName;return"number"==typeof b&&(b+="px"),"function"==typeof _&&(_=_(e)),_&&f.push(_),t("div",{domProps:{className:"org-tree-node-label"},on:{click:function(t){return s&&s(t,e)},mousedown:function(t){return l&&l(t,e)},mouseup:function(t){return c&&c(t,e)},touchstart:function(t){return d&&d(t,e)},touchleave:function(t){return p&&p(t,e)}}},[t("div",{domProps:{className:f.join(" ")},style:{width:b}},u)])},c=function(t,e,n){if(Array.isArray(e)&&e.length){var a=e.map((function(e){return s(t,e,n)}));return t("div",{domProps:{className:"org-tree-node-children"}},a)}return""},d={name:"VOrgTree",components:{OrgTreeNode:{render:function(t,e){var n=e.props;return s(t,n.data,e)},functional:!0}},props:{data:{type:[Object,Array],required:!0},props:{type:Object,default:function(){return{id:"deptId",label:"name",expand:"expand",children:"children"}}},horizontal:Boolean,collapsable:Boolean,nodeRender:Function,buttonRender:Function,labelWidth:[String,Number],labelClassName:[Function,String],expandAll:{type:Boolean,default:!1}},data:function(){return{flatData:{},dataCloned:{}}},watch:{data:{handler:function(t){var e=this;this._handleData(t),this._mapData(this.dataCloned,(function(t){(e.flatData[t[e.prop_id]]||{}).expand&&e.$set(t,e.prop_expand,!0)})),this._toggleExpand(this.dataCloned,this.expandAll)},deep:!0},expandAll:function(t){this._toggleExpand(this.dataCloned,t)}},computed:{prop_id:function(){return this.props.id},prop_label:function(){return this.props.label},prop_expand:function(){return this.props.expand},prop_children:function(){return this.props.children}},methods:{_handleData:function(t){this._cloneData(t)},_cloneData:function(t){this.dataCloned=this.utils.deepClone(t)},_setFlatData:function(t){this.flatData[t[this.prop_id]]=t},_mapData:function(t,e){var n=this;e(t);var a=t[this.prop_children];a&&a.forEach((function(t){n._mapData(t,e)}))},_updateExpandStatus:function(){this._mapData(this.dataCloned,this._setFlatData)},collapse:function(t){var e=this,n=this;t.forEach((function(t){t[e.prop_expand]&&(t[e.prop_expand]=!1);var a=t[e.prop_children];a&&n.collapse(a)}))},handleExpand:function(t){if(this.prop_expand in t){t[this.prop_expand]=!t[this.prop_expand];var e=t[this.prop_children];!t[this.prop_expand]&&e&&this.collapse(e)}else this.$set(t,this.prop_expand,!0);this.$emit("on-expand",t,t[this.prop_expand]),this._updateExpandStatus()},_toggleExpand:function(t,e){var n=this,a=this;if(Array.isArray(t))t.forEach((function(t){a.$set(t,n.prop_expand,e);var r=t[n.prop_children];r&&a._toggleExpand(r,e)}));else{a.$set(t,this.prop_expand,e);var r=t[this.prop_children];r&&a._toggleExpand(r,e)}},handleNodeClick:function(t,e){this.$emit("on-node-click",t,e,(function(){}))},toggleExpand:function(){this._toggleExpand(this.dataCloned,this.expandAll),this._updateExpandStatus()}},mounted:function(){this._handleData(this.data),this._updateExpandStatus(),this._toggleExpand(this.dataCloned,this.expandAll)}},p=(n("ecc6"),n("2877"));function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={name:"OrgTree",components:{orgTree:Object(p.a)(d,o,[],!1,null,"18b57d9c",null).exports},props:{expand:{type:Boolean,default:!0},horizontal:{type:Boolean,default:!0}},data:function(){return{flag:!1}},computed:h({},Object(r.e)(["dept"]),{data:function(){return this.dept.list}}),methods:h({},Object(r.d)(["setDept_List"]),{handleNodeClick:function(){this.flag=!1},nodeRender:function(t,e){return t("Poptip",{attrs:{trigger:"focus",title:""}},[t("Input",{class:["custom-org-node","no-shadow",e.children&&e.children.length?"has-children-label":""],attrs:{maxlength:40},props:{value:e.name},on:{"on-enter":this.handleEnter.bind(this,e),"on-blur":this.handleEnter.bind(this,e)}}),t("div",{class:"operateBtn",slot:"content"},[e.isAdd||1===e.deptId?"":t("a",{on:{click:this.handleDelete.bind(this,e)}},[this.$t("master.dept.delete")]),e.isAdd?t("a",["保存"]):t("a",{on:{click:this.handleAdd.bind(this,e)}},[this.$t("master.dept.add")]),t("div")])])},handleAdd:function(t,e){e.stopPropagation(),this.flag=!1,this.setDept_List({deptId:t.deptId,context:this,arr:this.dept.list,isleaf:!1,isAdd:!0})},handleEnter:function(t,e){e.stopPropagation(),this.setDept_List({deptId:t.deptId,context:this,arr:this.dept.list,name:e.target.value,isleaf:!1}),t.name===e.target.value||e.target.value.length<2||(t.isAdd?this.$emit("add",h({},t,{name:e.target.value})):this.$emit("update",h({},t,{name:e.target.value})))},handleDelete:function(t,e){e.stopPropagation(),this.$emit("delete",t)}})},b=(n("4d0b"),Object(p.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.data?n("orgTree",{attrs:{data:t.data,horizontal:t.horizontal,"node-render":t.nodeRender,"expand-all":t.expand,collapsable:""},on:{"on-node-click":t.handleNodeClick}}):t._e()}),[],!1,null,"3a04c792",null)).exports,_=(n("4917"),{name:"DeptSelector",data:function(){return{isShow:!1,treeData:[{title:"医薬基盤・健康・栄養研究所(0)",expand:!0,children:[{title:"(本部) (0)",expand:!0,children:[{title:"総務部(8)",value:666},{title:"監査担当(0)"}]},{title:"医薬基盤研究所(1)",expand:!0,children:[{title:"開発振興部(16)"},{title:"難治性疾患研究開発・支援センター(2)",expand:!0,children:[{title:"難治性疾患治療開発・支援室(10)"},{title:"難病資源研究室(6)"}]}]}]}],deptName:"请选择"}},methods:{handleClickLeaf:function(t){this.deptName=t[0].title,this.isShow=!1},showName:function(t){var e=t.match(/^[\s\S]+(?=\()/g);return e&&e[0]||t}}}),m=Object(p.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticStyle:{display:"flex",width:"calc(15% + 200px)"}},[n("span",{staticClass:"label"},[t._v("所属")]),n("Button",{staticClass:"input-like-span mr10 cursor grey",staticStyle:{width:"calc(100% - 200px)","border-radius":"0"},on:{click:function(e){t.isShow=!0}}},[t._v("\n    "+t._s(t.showName(t.deptName))+"\n  ")]),n("Drawer",{attrs:{title:"所属",placement:"right",width:"500",closable:!1},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("Tree",{ref:"tree",staticClass:"tree",attrs:{data:t.treeData,"empty-text":"所属データなし"},on:{"on-select-change":t.handleClickLeaf}})],1)],1)}),[],!1,null,null,null).exports,g=n("f62d");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={name:"DepartmentRegister",components:{OrgTree:b,DeptSelector:m,RefreshButton:n("df04").a.RefreshButton},data:function(){return{modal:!1,confirmerModal:!1,deleteValue:{},loading:!1,expand:!0,horizontal:!0}},computed:x({},Object(r.e)(["dept","user"]),{data:function(){return this.dept.searchList instanceof Array?this.dept.searchList:[this.dept.searchList]}}),activated:function(){},methods:x({},Object(r.c)(["department/Action_Dept_Get","department/Action_Dept_Add","department/Action_Dept_Update","department/Action_Dept_Delete","department/Action_Dept_Init"]),{onAdd:Object(g.a)((function(t){t.deptId=null,this["department/Action_Dept_Add"]({context:this,value:[t]})})),onUpdate:Object(g.a)((function(t){this["department/Action_Dept_Update"]({context:this,value:[t]})})),onDelete:function(t){this.modal=!0,this.deleteValue=t},del:Object(g.a)((function(){this["department/Action_Dept_Delete"]({context:this,value:[this.deleteValue.deptId]})})),onRefresh:Object(g.a)((function(){var t=this;this["department/Action_Dept_Init"]().then((function(){t.$Message.success("再表示完了")}))}))})},O=(n("f90e"),Object(p.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Content",{staticClass:"content"},[n("div",{staticClass:"content_head"},[n("div",{staticClass:"header"},[n("div",{staticClass:"title1"},[n("h1",[n("Icon",{attrs:{type:"i-departmentr colored"}}),t._v("\n          "+t._s(t.$route.meta.name)+"\n        ")],1)]),n("div",{staticClass:"btnbox"},[n("i-switch",{model:{value:t.expand,callback:function(e){t.expand=e},expression:"expand"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("展開")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("閉め")])]),n("RefreshButton",{on:{refresh:t.onRefresh}})],1)])]),n("div",{staticClass:"searchwrap"},[n("DeptSelector")],1),n("div",{staticClass:"content_body"},[n("OrgTree",{attrs:{expand:t.expand,horizontal:t.horizontal},on:{add:t.onAdd,delete:t.onDelete,update:t.onUpdate}})],1),n("Modal",{attrs:{width:"360",draggable:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),n("span",[t._v("注意")])],1),n("div",{staticStyle:{"text-align":"center"}},[n("h3",[t._v(t._s(""+t.deleteValue.name))])]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"error",size:"large",long:"",loading:t.loading},on:{click:t.del}},[t._v("删除")])],1)])],1)}),[],!1,null,"7a77fb06",null));e.default=O.exports},4917:function(t,e,n){"use strict";var a=n("cb7c"),r=n("9def"),o=n("0390"),i=n("5f1b");n("214f")("match",1,(function(t,e,n,s){return[function(n){var a=t(this),r=null==n?void 0:n[e];return void 0!==r?r.call(n,a):new RegExp(n)[e](String(a))},function(t){var e=s(n,t,this);if(e.done)return e.value;var l=a(t),c=String(this);if(!l.global)return i(l,c);var d=l.unicode;l.lastIndex=0;for(var p,u=[],h=0;null!==(p=i(l,c));){var f=String(p[0]);u[h]=f,""===f&&(l.lastIndex=o(c,r(l.lastIndex),d)),h++}return 0===h?null:u}]}))},"4d0b":function(t,e,n){"use strict";var a=n("e024");n.n(a).a},"5dbc":function(t,e,n){var a=n("d3f4"),r=n("8b97").set;t.exports=function(t,e,n){var o,i=e.constructor;return i!==n&&"function"==typeof i&&(o=i.prototype)!==n.prototype&&a(o)&&r&&r(t,o),t}},"8b97":function(t,e,n){var a=n("d3f4"),r=n("cb7c"),o=function(t,e){if(r(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{(a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:o}},aa77:function(t,e,n){var a=n("5ca1"),r=n("be13"),o=n("79e5"),i=n("fdef"),s="["+i+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),d=function(t,e,n){var r={},s=o((function(){return!!i[t]()||"​"!="​"[t]()})),l=r[t]=s?e(p):i[t];n&&(r[n]=l),a(a.P+a.F*s,"String",r)},p=d.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=d},b392:function(t,e,n){},c553:function(t,e,n){},c5f6:function(t,e,n){"use strict";var a=n("7726"),r=n("69a8"),o=n("2d95"),i=n("5dbc"),s=n("6a99"),l=n("79e5"),c=n("9093").f,d=n("11e9").f,p=n("86cc").f,u=n("aa77").trim,h="Number",f=a[h],b=f,_=f.prototype,m=o(n("2aeb")(_))==h,g="trim"in String.prototype,v=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,a,r,o=(e=g?e.trim():u(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var i,l=e.slice(2),c=0,d=l.length;c<d;c++)if((i=l.charCodeAt(c))<48||i>r)return NaN;return parseInt(l,a)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(m?l((function(){_.valueOf.call(n)})):o(n)!=h)?i(new b(v(e)),n,f):v(e)};for(var x,y=n("9e1e")?c(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;y.length>O;O++)r(b,x=y[O])&&!r(f,x)&&p(f,x,d(b,x));f.prototype=_,_.constructor=f,n("2aba")(a,h,f)}},e024:function(t,e,n){},ecc6:function(t,e,n){"use strict";var a=n("b392");n.n(a).a},f90e:function(t,e,n){"use strict";var a=n("c553");n.n(a).a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);