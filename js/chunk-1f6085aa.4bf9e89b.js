(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1f6085aa","chunk-43a11fda"],{4852:function(t,e,a){"use strict";a.r(e);var r=(a("8e6e"),a("ac6a"),a("456d"),a("7514"),a("96cf"),a("3b8d")),n=a("bd86"),s=a("2f62"),i=a("f62d"),o=a("65d1"),c=a("df04");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"ApplyConfirm",components:{ApplyConfirmTable:o.default,RefreshButton:c.a.RefreshButton},data:function(){return{loading:!1,amount:0,isShow:!1,denyData:[],columns:[{title:"申請者",slot:"empName",minWidth:100,maxWidth:200},{title:"休暇種類",key:"restTypeName",tooltip:!0,minWidth:60,maxWidth:180},{title:"対象日",slot:"dateList",minWidth:190,maxWidth:200},{title:"否認理由",slot:"remark"}],tableData:[],errorInfo:!1,pageValue:{curPage:1,list:[20,30,50,100],curSize:this.utils.getStorage("SO_userSettings","pageSize")||20},opts:{sidx:"create_time",order:"desc",status:0,page:null,keyword:null,limit:this.utils.getStorage("SO_userSettings","pageSize")||20}}},created:function(){this.getData()},computed:u({},Object(s.e)(["user"]),{empId:function(){return this.user.userInfo.empInfo?this.user.userInfo.empInfo.empId:null}}),methods:{getData:Object(i.a)(Object(r.a)(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.api.apply("applyHistory",this.opts);case 4:e=t.sent,a=e.data,this.tableData=this.disableCheckbox(a.list,this.empId),this.amount=a.totalCount,t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return");case 13:return t.prev=13,this.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[0,10,13,16]])})))),disableCheckbox:function(t,e){return t.map((function(t){return t.progressList.find((function(t){return 0===t.status})).id!==e?u({},t,{_disabled:!0}):t}))},confirm:Object(i.a)(Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(e=this.$refs.table.$refs.tableData.getSelection().map((function(t){return{applyId:t.applyId,pass:!0}}))).length){t.next=3;break}return t.abrupt("return",this.$Message.warning("少なくとも、一つの項目を選んでください。"));case 3:return t.prev=3,t.next=6,this.api.apply("approve",e);case 6:this.$Message.success("承認完了"),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return");case 12:return t.prev=12,this.getData(),t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[3,9,12,15]])})))),beforeDeny:Object(i.a)(Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.denyData=this.$refs.table.$refs.tableData.getSelection(),0!==this.denyData.length){t.next=3;break}return t.abrupt("return",this.$Message.warning("少なくとも、一つの項目を選んでください。"));case 3:this.isShow=!0;case 4:case"end":return t.stop()}}),t,this)})))),deny:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.denyData.map((function(t){return{applyId:t.applyId,pass:!1,remark:t.remara}})),!e.some((function(t){return t.remark&&t.remark.length>100}))){t.next=6;break}return t.abrupt("return",this.errorInfo=!0);case 6:this.errorInfo=!1;case 7:return t.prev=7,t.next=10,this.api.apply("approve",e);case 10:this.isShow=!1,this.$Message.success("否認完了"),t.next=17;break;case 14:return t.prev=14,t.t0=t.catch(7),t.abrupt("return");case 17:return t.prev=17,this.getData(),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[7,14,17,20]])})));return function(){return t.apply(this,arguments)}}(),cancel:function(){this.isShow=!1},onRefresh:function(){this.opts.keyword=null,this.$refs.Page.currentPage=1,this.getData(),this.$Message.success("再表示完了")},pageChange:function(t){this.opts.page=t,this.pageValue.curPage=t,this.getData()},sizeChange:function(t){this.opts.limit=t,this.pageValue.curSize=t,this.utils.setStorage("SO_userSettings",{pageSize:t}),this.getData()}}},h=(a("83e7"),a("2877")),d=Object(h.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Content",{staticClass:"content"},[a("div",{staticClass:"content_head"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title1"},[a("h1",[a("Icon",{attrs:{type:"i-happytime colored"}}),t._v("\n          "+t._s(t.$route.meta.name)+"\n        ")],1)]),a("div",{staticClass:"btnbox"},[a("Button",{attrs:{type:"primary",size:"large",icon:"md-done-all"},on:{click:t.confirm}},[t._v("承認")]),a("Button",{attrs:{type:"error",size:"large",icon:"md-hand"},on:{click:t.beforeDeny}},[t._v("否認")]),a("RefreshButton",{on:{refresh:t.onRefresh}})],1)]),a("div",{staticClass:"searchwrap"},[a("span",{staticClass:"label"},[t._v("キーワード")]),a("Input",{staticClass:"mar like-select",attrs:{placeholder:"社員名或はコード",search:"","enter-button":""},on:{"on-search":t.getData},model:{value:t.opts.keyword,callback:function(e){t.$set(t.opts,"keyword",e)},expression:"opts.keyword"}}),a("span",{staticStyle:{flex:"1"}})],1)]),a("div",{staticClass:"content_body"},[a("div",{staticClass:"table-top"},[a("Row",{attrs:{gutter:16}},[a("Col",{staticClass:"tr",attrs:{span:"24"}},[a("Page",{ref:"Page",attrs:{total:t.amount,current:t.pageValue.curPage,"show-total":"","show-sizer":"","page-size":t.pageValue.curSize,"page-size-opts":t.pageValue.list},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)],1)],1),a("ApplyConfirmTable",{ref:"table",attrs:{data:t.tableData,loading:t.loading}}),a("Modal",{attrs:{title:"否認理由付け","footer-hide":!0,"mask-closable":!1,width:"800"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[a("Alert",{staticClass:"primary-info"},[t._v("否認理由付けなくてもいいです。")]),t.errorInfo?a("Alert",{staticClass:"error-info",attrs:{type:"error"}},[t._v("拒否理由の長さは１００位までに入力してください。")]):t._e(),a("ul",{staticClass:"apply-history-list"},t._l(t.denyData,(function(e,r){return a("li",{key:r,staticClass:"with-dot ing"},[a("Row",[a("Col",{staticClass:"title",staticStyle:{"margin-left":"4.5%"},attrs:{span:"6"}},[t._v("\n              "+t._s(t.$refs.table.handleApplyDayShow(e.dateList))+"\n            ")]),a("Col",{staticClass:"title",staticStyle:{"margin-left":"2.5%"},attrs:{span:"6"}},[t._v(t._s(e.empName))])],1),a("Row",[a("Col",{class:1===e.typeId?"description":"description with-mark",staticStyle:{"font-weight":"bold","margin-left":"4.5%"},attrs:{span:"12"}},[t._v("\n              "+t._s(e.restTypeName)+"\n            ")])],1),a("Row",[a("Col",{staticClass:"description light-grey",staticStyle:{"margin-left":"4.5%"},attrs:{span:"20"}},[t._v(t._s(e.remark))])],1),a("Row",[a("Col",{staticClass:"description red",staticStyle:{"margin-left":"4.5%"},attrs:{span:"20"}},[a("Input",{staticClass:"non-border-input",attrs:{placeholder:"拒否理由"},model:{value:e.remara,callback:function(a){t.$set(e,"remara",a)},expression:"item.remara"}})],1)],1)],1)})),0),a("div",{staticClass:"my-footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("キャンセル")]),a("Button",{attrs:{type:"error"},on:{click:t.deny}},[t._v("否認")])],1)],1)],1)])}),[],!1,null,"5c52897a",null);e.default=d.exports},"5d60":function(t,e,a){},"65d1":function(t,e,a){"use strict";a.r(e);var r={name:"ApplyConfirmTable",props:{data:Array,loading:Boolean},data:function(){return{columns:[{title:"申請日時",key:"createTime",minWidth:50,maxWidth:160,tooltip:!0},{title:"申請者",slot:"empName",minWidth:100,maxWidth:200},{title:"申請内容",slot:"restTypeName",tooltip:!0,minWidth:105,maxWidth:200},{title:"対象日",slot:"dateList",minWidth:190,maxWidth:200},{title:"承認フロー",slot:"progressList",align:"center",minWidth:254},{title:"申請理由",key:"remark",tooltip:!0,minWidth:70},{type:"selection",width:50,align:"center"}]}},methods:{handleApplyDayShow:function(t){return 1===t.length?t.join(""):"".concat(t[0]," ～ ").concat(t[t.length-1])},handleApplyMarkShow:function(t){switch(t){case 0:return"apply-status ing";case 1:return"apply-status ok";case 2:return"apply-status deny";case 3:return"apply-status ok";default:return"apply-status"}}}},n=(a("8169"),a("2877")),s=Object(n.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tableData",staticClass:"big-font-size-table",attrs:{stripe:"",columns:t.columns,data:t.data},scopedSlots:t._u([{key:"dateList",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(t.handleApplyDayShow(r.dateList)))])]}},{key:"empName",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.code+" "+r.empName))])]}},{key:"progressList",fn:function(e){var r=e.row;return[a("ul",{staticStyle:{display:"flex","justify-content":"center"}},t._l(r.progressList,(function(e,r){return a("li",{key:r,staticStyle:{"margin-right":"10px"}},[a("span",[t._v(t._s(e.name+" "))]),a("span",{class:t.handleApplyMarkShow(e.status)})])})),0)]}},{key:"restTypeName",fn:function(e){var r=e.row;return[a("span",{class:1===r.typeId?"":"description"},[t._v(t._s(r.restTypeName))])]}}])})}),[],!1,null,"54347fb5",null);e.default=s.exports},"6a6d":function(t,e,a){},7514:function(t,e,a){"use strict";var r=a("5ca1"),n=a("0a49")(5),s="find",i=!0;s in[]&&Array(1)[s]((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},8169:function(t,e,a){"use strict";var r=a("6a6d");a.n(r).a},"83e7":function(t,e,a){"use strict";var r=a("5d60");a.n(r).a}}]);