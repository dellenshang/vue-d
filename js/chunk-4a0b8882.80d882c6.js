(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4a0b8882"],{9927:function(e,t,s){"use strict";var a=s("e26c");s.n(a).a},e26c:function(e,t,s){},f47e:function(e,t,s){"use strict";s.r(t);var a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),r=(s("28a5"),s("bd86")),n=s("2f62"),i=s("f62d"),o=s("222d"),c=s("5cbb"),l=s("df04");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"UserRegister",components:{UserTable:o.default,UserAdd:c.default,RefreshButton:l.a.RefreshButton},data:function(){return{value:{groupId:"",groupName:""},isAdd:!0,filterName:"",loading:!1,forReset:!1,searchLevel:[],opts:{sidx:"update_time",order:"desc",page:null,keyword:null,leave:!1,limit:this.utils.getStorage("SO_userSettings","pageSize")||20,deptId:null}}},created:function(){this.getData()},computed:u({},Object(n.e)(["dept","userType"]),{data:function(){return this.dept.searchList instanceof Array?this.dept.searchList:[this.dept.searchList]}}),methods:u({},Object(n.c)(["user/Action_User_Get","user/Action_User_Add","user/Action_User_Update","user/Action_User_Delete","userType/Action_UserType_Get","role/Action_Role_Get_Mutiselect"]),{getData:Object(i.a)((function(e){var t={sidx:"update_time",order:"desc",limit:this.utils.getStorage("SO_userSettings","pageSize")||20,leaveFlag:this.opts.leaveFlag};e?this["user/Action_User_Get"]({value:t,context:this}):this["user/Action_User_Get"]({value:this.opts,context:this}),this["userType/Action_UserType_Get"]({context:this}),this["role/Action_Role_Get_Mutiselect"]()})),keywordSearch:function(){this["user/Action_User_Get"]({value:this.opts,context:this})},onAdd:function(){var e=this.handleAction();e&&this["user/Action_User_Add"]({value:[e],context:this})},onUpdate:function(e){var t=this.handleAction(e);this["user/Action_User_Update"]({value:[t],context:this})},handleAction:function(e){return e||(e=u({},this.$refs.addData.localValue3,{},this.$refs.addData.localValue2,{},this.$refs.addData.localValue1)),1===e.isAdmin&&e.adminTime&&(e.diligentStartTime=e.adminTime[0],e.diligentEndTime=e.adminTime[1]),e.workTypeId=0,e.paidType=e.vacationPaidType,e.empStatus=e.status,e.sex=+e.gender,e.company&&(e.companyId=e.company.split("-")[0],e.groupId=e.company.split("-")[1]),this.forReset=!this.forReset,e},onDelete:function(e){this["user/Action_User_Delete"]({value:[e],context:this})},onRefresh:function(){this.getData(!0),this.opts.keyword=null,this.opts.deptId=null,this.searchLevel=[],this.$refs.tableData.$refs.Page.currentPage=1,this.$Message.success("再表示完了")},pageChange:function(e){this.opts.page=e,this["user/Action_User_Get"]({value:this.opts,context:this})},sizeChange:function(e){this.opts.limit=e,this.utils.setStorage("SO_userSettings",{pageSize:e}),this["user/Action_User_Get"]({value:this.opts,context:this})},haddleFliter:function(){return this.opts.page=null,this.$refs.tableData.$refs.Page.currentPage=1,this.opts.groupId=this.filterName,this["user/Action_User_Get"]({value:this.opts,context:this})},handleCascaderView:function(e){return e[e.length-1]},handleSearch:function(e){var t=this;e||this.$nextTick(Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.searchLevel[t.searchLevel.length-1]&&(t.opts.deptId=t.searchLevel[t.searchLevel.length-1],t["user/Action_User_Get"]({value:t.opts,context:t}));case 2:case"end":return e.stop()}}),e)}))))}})},p=(s("9927"),s("2877")),f=Object(p.a)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Content",{staticClass:"content"},[s("div",{staticClass:"content_head"},[s("div",{staticClass:"header"},[s("div",{staticClass:"title1"},[s("h1",[s("Icon",{attrs:{type:"i-emeer colored"}}),e._v("\n          "+e._s(e.$route.meta.name)+"\n        ")],1)]),s("div",{staticClass:"btnbox"},[!0===e.forReset?s("UserAdd",{directives:[{name:"auth",rawName:"v-auth",value:["save"],expression:"['save']"}],key:"forReset-1",ref:"addData",attrs:{isAdd:e.isAdd},on:{add:e.onAdd}}):s("UserAdd",{directives:[{name:"auth",rawName:"v-auth",value:["save"],expression:"['save']"}],key:"forReset-2",ref:"addData",attrs:{isAdd:e.isAdd},on:{add:e.onAdd}}),s("RefreshButton",{on:{refresh:e.onRefresh}})],1)]),s("div",{staticClass:"searchwrap"},[s("span",{staticClass:"label"},[e._v("所属名")]),s("Cascader",{staticClass:"mr10",staticStyle:{width:"200px"},attrs:{data:e.data,"render-format":e.handleCascaderView,filterable:"","change-on-select":""},on:{"on-visible-change":e.handleSearch},model:{value:e.searchLevel,callback:function(t){e.searchLevel=t},expression:"searchLevel"}}),s("span",{staticClass:"label"},[e._v("キーワード")]),s("Input",{staticClass:"mar like-select",attrs:{placeholder:"社員名或はコード",search:"","enter-button":""},on:{"on-search":e.keywordSearch},model:{value:e.opts.keyword,callback:function(t){e.$set(e.opts,"keyword",t)},expression:"opts.keyword"}}),s("Checkbox",{staticClass:"mar",on:{"on-change":e.keywordSearch},model:{value:e.opts.leave,callback:function(t){e.$set(e.opts,"leave",t)},expression:"opts.leave"}},[e._v("退職者を表示します")]),s("span",{staticClass:"place-holder"})],1)]),s("div",{staticClass:"content_body"},[s("UserTable",{ref:"tableData",attrs:{loading:e.loading},on:{refresh:function(t){return e.refresh(t)},sizeChange:e.sizeChange,pageChange:e.pageChange,update:e.onUpdate,delete:e.onDelete}})],1)])}),[],!1,null,"0f87fda5",null);t.default=f.exports}}]);