(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-589e5cff","chunk-8f8fadf8"],{2804:function(e,t,r){},b1d4c:function(e,t,r){"use strict";r.r(t);var a=(r("8e6e"),r("ac6a"),r("456d"),r("2fdb"),r("96cf"),r("3b8d")),n=r("bd86"),o=r("df04"),i=r("2f62"),s=r("d4c2"),c=r("f62d");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=Object(i.a)("auth").mapState,f={name:"PermissionTable",props:{data:Array,loading:Boolean},components:{PermissionAdd:s.default,DeleteButton:o.a.DeleteButton},data:function(){return{columns:[{title:"権限名称",slot:"name",minWidth:50,align:"center"},{title:"備考",slot:"remark",minWidth:300,align:"center"},{title:"操作",align:"center",width:180,slot:"action"}],forRest1:!1,choosedLeaf:[]}},computed:u({},d(["treeMenu"]),{treeData:function(){return this.treeMenu}}),methods:{handleBtn:function(){var e=Object(a.a)(regeneratorRuntime.mark((function e(t){var r,a,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.role("searchById",{id:t});case 2:r=e.sent,a=r.data,n=this.$refs.updateData,this.choosedLeaf=a.menuList.map((function(e){return e.menuId})),o=this.utils.deepClone(this.treeData),Object(c.d)(o[0],this.isChoosed),n.isShow=!0,n.treeData=o,n.localValue=u({},a);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),isChoosed:function(e){this.choosedLeaf.includes(e.value)&&this.$set(e,"checked",!0)},onRemove:function(e){this.$emit("delete",[e])}}},p=r("2877"),m=Object(p.a)(f,(function(){var e=this,t=this,r=t.$createElement,a=t._self._c||r;return a("div",[a("Table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{stripe:"",border:"",columns:t.columns,data:t.data},scopedSlots:t._u([{key:"role",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.role))])]}},{key:"name",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.name))])]}},{key:"remark",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.remark))])]}},{key:"action",fn:function(e){var r=e.row;return[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["update"],expression:"['update']"}],staticStyle:{"margin-right":"5px"},attrs:{type:"primary",ghost:"",size:"small",icon:"ios-create"},on:{click:function(e){return t.handleBtn(r.roleId)}}},[t._v("\n        訂正\n      ")]),a("DeleteButton",{directives:[{name:"auth",rawName:"v-auth",value:["delete"],expression:"['delete']"}],attrs:{isLight:!0},on:{remove:function(e){return t.onRemove(r.roleId)}}})]}}])}),!0===t.forRest1?a("PermissionAdd",{directives:[{name:"auth",rawName:"v-auth",value:["update"],expression:"['update']"}],key:"forRest-1",ref:"updateData",on:{update:function(t){return e.$emit("update",t)}}}):a("PermissionAdd",{directives:[{name:"auth",rawName:"v-auth",value:["update"],expression:"['update']"}],key:"forRest-2",ref:"updateData",on:{update:function(t){return e.$emit("update",t)}}})],1)}),[],!1,null,"f92f9194",null);t.default=m.exports},bbe5:function(e,t,r){"use strict";var a=r("2804");r.n(a).a},d4c2:function(e,t,r){"use strict";r.r(t);var a=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),n=r("2f62");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var i=Object(n.a)("auth").mapState,s={name:"PermissionAdd",props:{isAdd:{type:Boolean,default:!1}},data:function(){return{localValue:{name:"",remark:"",menuIdList:[]},ruleValidate:{name:[{required:!0,message:"入力してください",trigger:"blur"}],remark:[{validator:function(e,t,r){return t?t.length<10?r(new Error("10文字以上に入力してください。")):void r():r()},trigger:"blur"}]},isShow:!1,treeData:[]}},watch:{isShow:function(e){if(e){if(this.treeData.length)return;this.treeData=this.utils.deepClone(this.treeMenu)}}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i(["treeMenu"])),methods:{cancel:function(){this.$refs.localValue.resetFields(),this.isShow=!1},add:function(){var e=this;this.$refs.localValue.validate((function(t){if(t){var r=e.$refs.tree.getCheckedNodes();e.localValue.menuIdList=r.map((function(e){return e.value})),e.$emit("add"),e.isShow=!1}}))},update:function(){var e=this;this.$refs.localValue.validate((function(t){if(t){var r=e.$refs.tree.getCheckedNodes();e.localValue.menuIdList=r.map((function(e){return e.value})),e.$emit("update",e.localValue),e.isShow=!1}}))}}},c=(r("bbe5"),r("2877")),l=Object(c.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[!0===e.isAdd?r("Button",{attrs:{type:"primary",size:"large",icon:"md-add-circle"},on:{click:function(t){e.isShow=!0}}},[e._v("追加")]):e._e(),r("Modal",{attrs:{title:e.isAdd?"権限追加":"権限訂正","footer-hide":"","mask-closable":!1,draggable:""},on:{"on-cancel":e.cancel},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[r("Form",{ref:"localValue",attrs:{"label-width":120,model:e.localValue,rules:e.ruleValidate}},[r("FormItem",{attrs:{label:"権限名称",prop:"name"}},[r("Input",{attrs:{placeholder:"権限名称",maxlength:15},model:{value:e.localValue.name,callback:function(t){e.$set(e.localValue,"name",t)},expression:"localValue.name"}})],1),r("FormItem",{attrs:{label:"備考",prop:"remark"}},[r("Input",{attrs:{placeholder:"備考",maxlength:100},model:{value:e.localValue.remark,callback:function(t){e.$set(e.localValue,"remark",t)},expression:"localValue.remark"}})],1),r("div",{staticClass:"label"},[e._v("詳細")]),r("Tree",{ref:"tree",staticClass:"tree",attrs:{data:e.treeData,"show-checkbox":""}})],1),r("div",{staticClass:"my-footer"},[r("Button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("キャンセル")]),!1===e.isAdd?r("Button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("更新")]):r("Button",{attrs:{type:"success",size:"large"},on:{click:function(t){return e.add()}}},[e._v("登録")])],1)],1)],1)}),[],!1,null,"2a58edbd",null);t.default=l.exports}}]);