(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4a5adfdc","chunk-695a31ac"],{"0647":function(e,t,a){"use strict";var l=a("6990");a.n(l).a},"0bb5":function(e,t,a){"use strict";var l=a("bd83");a.n(l).a},"222d":function(e,t,a){"use strict";a.r(t);var l=(a("8e6e"),a("ac6a"),a("456d"),a("7514"),a("7f7f"),a("bd86")),r=a("df04"),o=a("5cbb"),i=a("f62d"),n=a("2f62");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"UserTable",props:{loading:Boolean},components:{UserAdd:o.default,DeleteButton:r.a.DeleteButton},data:function(){return{columns:[{title:"コード",key:"empCode",width:80,align:"right"},{title:"氏名",key:"realName",width:100,align:"left"},{title:"所属",slot:"deptId",minWidth:180,maxWidth:300,align:"center"},{title:"社員区分",slot:"empTypeId",minWidth:100,align:"center"},{title:"勤務体系",key:"workType",minWidth:100,align:"center"},{title:"権限",slot:"roleList",minWidth:100,maxWidth:200,align:"center"},{title:"入社年月日",key:"hireDate",minWidth:95,maxWidth:120,align:"center"},{title:"退職年月日",key:"leaveDate",minWidth:95,maxWidth:120,align:"center"},{title:"来年有休予定",slot:"vacationPaidType",minWidth:60,maxWidth:120,align:"center"},{title:"操作",slot:"action",width:150,align:"center"}],forRest1:!1,isAdd:!1}},computed:c({},Object(n.e)(["user","userType","role"]),{data:function(){return this.user.list},roleList:function(){return this.role.list},pageValue:function(){return{amount:this.user.count,curPage:1,list:[20,30,50,100],curSize:this.utils.getStorage("SO_userSettings","pageSize")||20}}}),methods:{handleBtn:function(e){var t=this.$refs.updateData;t.isShow=!0,t.localValue1=c({},e),t.localValue2=c({},e,{company:"".concat(e.companyId,"-").concat(e.groupId),roleIdList:e.roleList,isAdmin:e.diligentStartTime.indexOf("1970")>-1?2:1}),t.localValue3=c({},e)},onUpdate:Object(i.a)((function(e){this.forRest1=!this.forRest1,this.$emit("update",e)})),onRemove:Object(i.a)((function(e){this.$emit("delete",e)})),userTypeNameView:function(e){return this.userType.list.find((function(t){return t.typeId===e})).name},roleNameView:function(e){return this.role.list.find((function(t){return t.value===e})).label},pageChange:function(e){this.pageValue.curPage=e,this.$emit("pageChange",e)},sizeChange:function(e){this.pageValue.curSize=e,this.$emit("sizeChange",e)}}},d=(a("0bb5"),a("2877")),p=Object(d.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-top"},[a("Row",{attrs:{gutter:16}},[a("Col",{staticClass:"tr",attrs:{span:"24"}},[a("Page",{ref:"Page",attrs:{total:e.pageValue.amount,current:e.pageValue.curPage,"show-total":"","show-sizer":"","page-size":e.pageValue.curSize,"page-size-opts":e.pageValue.list},on:{"on-change":e.pageChange,"on-page-size-change":e.sizeChange}})],1)],1)],1),a("Table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",columns:e.columns,data:e.data},scopedSlots:e._u([{key:"deptId",fn:function(t){var l=t.row;return l.deptList?[a("div",{staticClass:"dept-flex"},e._l(l.deptList,(function(t,l){return a("span",{key:l,class:t.leader?"row-label-primary":"row-label-primary not-leader"},[e._v("\n          "+e._s(t.name)+"\n        ")])})),0)]:void 0}},{key:"empTypeId",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(e.userTypeNameView(l.empTypeId)))])]}},{key:"roleList",fn:function(t){var l=t.row;return[a("div",{staticClass:"dept-flex"},e._l(l.roleList,(function(t,l){return a("span",{key:l,staticClass:"row-label-primary"},[e._v("\n          "+e._s(e.roleNameView(t))+"\n        ")])})),0)]}},{key:"vacationPaidType",fn:function(t){var l=t.row;return[a("span",[e._v("\n        "+e._s(1===l.vacationPaidType?"比例":"通常")+"\n      ")])]}},{key:"status",fn:function(t){var l=t.row;return[a("span",{class:1===l.status?"blue":2===l.status?"grey":"red"},[e._v("\n        "+e._s(1===l.status?"在":2===l.status?"休":3===l.status?"離":"")+"\n      ")])]}},{key:"action",fn:function(t){var l=t.row;return[a("div",[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:["update"],expression:"['update']"}],staticStyle:{"margin-right":"5px"},attrs:{type:"primary",ghost:"",size:"small",icon:"ios-create"},on:{click:function(t){return e.handleBtn(l)}}},[e._v("\n          訂正\n        ")]),a("DeleteButton",{directives:[{name:"auth",rawName:"v-auth",value:["delete"],expression:"['delete']"}],attrs:{isLight:!0},on:{remove:function(t){return e.onRemove(l.empId)}}})],1)]}}],null,!0)}),!0===e.forRest1?a("UserAdd",{directives:[{name:"auth",rawName:"v-auth",value:["update"],expression:"['update']"}],key:"forRest-1",ref:"updateData",attrs:{isAdd:e.isAdd},on:{update:function(t){return e.onUpdate(t)}}}):a("UserAdd",{directives:[{name:"auth",rawName:"v-auth",value:["update"],expression:"['update']"}],key:"forRest-2",ref:"updateData",attrs:{isAdd:e.isAdd},on:{update:function(t){return e.onUpdate(t)}}})],1)}),[],!1,null,"1341a6c6",null);t.default=p.exports},"5cbb":function(e,t,a){"use strict";a.r(t);var l=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=a("2f62"),o=a("f62d");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s={name:"UserAdd",props:{isAdd:Boolean},data:function(){var e=this,t=function(t,a,l){return e.errorInfo=!1,a&&e.localValue2.leaveDate?new Date(e.localValue2.leaveDate)<new Date(e.localValue2.hireDate)?(e.errorInfo=!0,e.errorMsg="退職年月日が入職年月日より前の日付に設定されています。",l(new Error(""))):void l():l()};return{localValue1:{},localValue2:{},localValue3:{},errorInfo:!1,errorMsg:"",loading:!1,currentStep:0,ruleValidate1:{empCode:[{required:!0,trigger:"blur"}],realName:[{required:!0,trigger:"blur"}],email:[{required:!1,validator:function(e,t,a){return t?/[\w'.%+-]+@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,4}/.test(t)?a():a(new Error("正しく入力してください。")):a()},trigger:"blur"}]},ruleValidate2:{roleIdList:[{required:!0,type:"array",trigger:"change"}],workTypeId:[{type:"number",required:!0,trigger:"change"}],deptId:[{type:"number",required:!0,trigger:"change"}],company:[{required:!0,trigger:"change"}],empTypeId:[{type:"number",required:!0,trigger:"change"}],checkInStartDate:[{required:!0,trigger:"blur"}],hireDate:[{required:!1,validator:t,trigger:"change"}],leaveDate:[{required:!1,validator:t,trigger:"change"}]},isShow:!1,value:[]}},computed:n({},Object(r.e)(["user","dept","company","role","userType"]),{data:function(){return[this.dept.searchList]},companyList:function(){return this.company.list},userTypeList:function(){return this.userType.list},roleList:function(){return this.role.list},mutiDeptList:function(){if(this.dept.searchList.length<1)return[];var e=[];return Object(o.d)(this.dept.searchList[0],(function(t){return e=e.concat({value:t.value,label:t.label})})),e.shift(),e}}),methods:{cancel:function(){this.isShow=!1,this.$refs.localValue1.resetFields(),this.$refs.localValue2.resetFields()},add:function(){this.$emit("add"),this.isShow=!1},update:function(){this.$emit("update",n({},this.localValue3,{empCode:this.localValue1.empCode,realName:this.localValue1.realName,username:this.localValue1.username,gender:this.localValue1.gender,age:this.localValue1.age,email:this.localValue1.email,birthDate:this.localValue1.birthDate,status:this.localValue1.status,empTypeId:this.localValue2.empTypeId,workTypeId:this.localValue2.workTypeId,deptId:this.localValue2.deptId,roleIdList:this.localValue2.roleIdList,company:this.localValue2.company,hireDate:this.localValue2.hireDate,leaveDate:this.localValue2.leaveDate,expiryDate:this.localValue2.expiryDate,checkInStartDate:this.localValue2.checkInStartDate,isAdmin:this.localValue2.isAdmin,adminTime:this.localValue2.adminTime})),this.isShow=!1},onValidate:function(e,t,a){},next:function(){var e=this;return 0===this.currentStep?this.$refs.localValue1.validate((function(t){t&&(e.currentStep+=1)})):1===this.currentStep?this.$refs.localValue2.validate((function(t){t&&(e.currentStep+=1)})):void 0},back:function(){return 0===this.currentStep?void 0:this.currentStep-=1}}},c=(a("0647"),a("2877")),u=Object(c.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[!0===e.isAdd?a("Button",{attrs:{type:"primary",size:"large",icon:"md-add-circle"},on:{click:function(t){e.isShow=!0}}},[e._v("追加")]):e._e(),a("Modal",{attrs:{title:e.isAdd?"社員追加":"社員訂正","mask-closable":!1,"footer-hide":"",draggable:""},on:{"on-cancel":e.cancel},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[a("Steps",{staticClass:"stepLook",attrs:{current:e.currentStep}},[a("Step",{attrs:{title:"基本情報"}}),a("Step",{attrs:{title:"勤務情報"}}),a("Step",{attrs:{title:"有給関連"}})],1),a("Form",{directives:[{name:"show",rawName:"v-show",value:0===e.currentStep,expression:"currentStep === 0"}],ref:"localValue1",attrs:{"label-width":120,model:e.localValue1,rules:e.ruleValidate1}},[a("FormItem",{attrs:{label:"社員コード",prop:"empCode"}},[a("Input",{attrs:{placeholder:"ログイン用可",maxlength:7},model:{value:e.localValue1.empCode,callback:function(t){e.$set(e.localValue1,"empCode",t)},expression:"localValue1.empCode"}})],1),a("FormItem",{attrs:{label:"社員名",prop:"realName"}},[a("Input",{attrs:{placeholder:"氏名",maxlength:30},model:{value:e.localValue1.realName,callback:function(t){e.$set(e.localValue1,"realName",t)},expression:"localValue1.realName"}})],1),a("FormItem",{attrs:{label:"アカウント名"}},[a("Input",{attrs:{placeholder:"ログイン用可",maxlength:30},model:{value:e.localValue1.username,callback:function(t){e.$set(e.localValue1,"username",t)},expression:"localValue1.username"}})],1),a("FormItem",{attrs:{label:"性別"}},[a("RadioGroup",{staticClass:"radio-fix",model:{value:e.localValue1.gender,callback:function(t){e.$set(e.localValue1,"gender",t)},expression:"localValue1.gender"}},[a("Radio",{attrs:{label:0}},[e._v("未知")]),a("Radio",{attrs:{label:1}},[e._v("男")]),a("Radio",{attrs:{label:2}},[e._v("女")])],1)],1),a("FormItem",{attrs:{label:"年齢"}},[a("Input",{attrs:{placeholder:"年齢",maxlength:3},model:{value:e.localValue1.age,callback:function(t){e.$set(e.localValue1,"age",t)},expression:"localValue1.age"}})],1),a("FormItem",{attrs:{label:"メール",prop:"email"}},[a("Input",{attrs:{placeholder:"メールアドレス",maxlength:50},model:{value:e.localValue1.email,callback:function(t){e.$set(e.localValue1,"email",t)},expression:"localValue1.email"}})],1),a("FormItem",{attrs:{label:"生年月日"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",value:e.localValue1.birthDate,placeholder:"生年月日"},on:{"on-change":function(t){e.localValue1.birthDate=t}}})],1),e.isAdd?e._e():a("FormItem",{attrs:{label:"在職状況"}},[a("RadioGroup",{staticClass:"radio-fix",model:{value:e.localValue1.status,callback:function(t){e.$set(e.localValue1,"status",t)},expression:"localValue1.status"}},[a("Radio",{attrs:{label:1}},[e._v("在職中")]),a("Radio",{attrs:{label:2}},[e._v("休暇中")]),a("Radio",{attrs:{label:3}},[e._v("離職")])],1)],1)],1),a("Form",{directives:[{name:"show",rawName:"v-show",value:1===e.currentStep,expression:"currentStep === 1"}],ref:"localValue2",attrs:{"label-width":120,model:e.localValue2,rules:e.ruleValidate2},on:{"on-validate":e.onValidate}},[a("Alert",{directives:[{name:"show",rawName:"v-show",value:e.errorInfo,expression:"errorInfo"}],staticClass:"error-info",attrs:{type:"error"}},[e._v(e._s(e.errorMsg))]),a("FormItem",{attrs:{label:"社員区分",prop:"empTypeId"}},[a("Select",{attrs:{filterable:""},model:{value:e.localValue2.empTypeId,callback:function(t){e.$set(e.localValue2,"empTypeId",t)},expression:"localValue2.empTypeId"}},e._l(e.userTypeList,(function(t,l){return a("Option",{key:l,attrs:{value:t.typeId}},[e._v(e._s(t.name))])})),1)],1),a("FormItem",{attrs:{label:"勤務体系",prop:"workTypeId"}},[a("Select",{attrs:{filterable:""},model:{value:e.localValue2.workTypeId,callback:function(t){e.$set(e.localValue2,"workTypeId",t)},expression:"localValue2.workTypeId"}},e._l(e.mutiDeptList,(function(t,l){return a("Option",{key:l,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),a("FormItem",{attrs:{label:"所属名",prop:"deptId"}},[a("Select",{attrs:{filterable:""},model:{value:e.localValue2.deptId,callback:function(t){e.$set(e.localValue2,"deptId",t)},expression:"localValue2.deptId"}},e._l(e.mutiDeptList,(function(t,l){return a("Option",{key:l,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),a("FormItem",{attrs:{label:"権限",prop:"roleIdList"}},[a("Select",{attrs:{multiple:"",filterable:""},model:{value:e.localValue2.roleIdList,callback:function(t){e.$set(e.localValue2,"roleIdList",t)},expression:"localValue2.roleIdList"}},e._l(e.roleList,(function(t,l){return a("Option",{key:l,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),a("FormItem",{attrs:{label:"会社",prop:"company"}},[a("Select",{attrs:{filterable:""},model:{value:e.localValue2.company,callback:function(t){e.$set(e.localValue2,"company",t)},expression:"localValue2.company"}},e._l(e.companyList,(function(t,l){return a("Option",{key:l,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1)],1),a("FormItem",{attrs:{label:"入社年月日",prop:"hireDate"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"入社年月日"},on:{"on-change":function(t){e.localValue2.hireDate=t}},model:{value:e.localValue2.hireDate,callback:function(t){e.$set(e.localValue2,"hireDate",t)},expression:"localValue2.hireDate"}})],1),a("FormItem",{attrs:{label:"退職年月日",prop:"leaveDate"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"退職年月日"},on:{"on-change":function(t){e.localValue2.leaveDate=t}},model:{value:e.localValue2.leaveDate,callback:function(t){e.$set(e.localValue2,"leaveDate",t)},expression:"localValue2.leaveDate"}})],1),a("FormItem",{attrs:{label:"契約の締切時間"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",value:e.localValue2.expiryDate,placeholder:"契約の締切時間"},on:{"on-change":function(t){e.localValue2.expiryDate=t}}})],1),a("FormItem",{attrs:{label:"勤務計算開始時間",prop:"checkInStartDate"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",value:e.localValue2.checkInStartDate,placeholder:"勤務計算開始時間"},on:{"on-change":function(t){e.localValue2.checkInStartDate=t}}})],1),a("FormItem",{attrs:{label:"勤務管理対象外社員"}},[a("RadioGroup",{staticClass:"radio-fix",model:{value:e.localValue2.isAdmin,callback:function(t){e.$set(e.localValue2,"isAdmin",t)},expression:"localValue2.isAdmin"}},[a("Radio",{attrs:{label:1}},[e._v("はい")]),a("Radio",{attrs:{label:2}},[e._v("いいえ")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:1===e.localValue2.isAdmin,expression:"localValue2.isAdmin === 1"}],attrs:{label:"勤務管理対象外時間"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{value:[e.localValue2.diligentStartTime,e.localValue2.diligentEndTime],separator:"~",type:"daterange"},on:{"on-change":function(t){e.localValue2.adminTime=t}}})],1)],1),a("Form",{directives:[{name:"show",rawName:"v-show",value:2===e.currentStep,expression:"currentStep === 2"}],ref:"localValue3",attrs:{"label-width":120,model:e.localValue3}},[a("FormItem",{attrs:{label:"来年有休予定"}},[a("RadioGroup",{staticClass:"radio-fix",model:{value:e.localValue3.vacationPaidType,callback:function(t){e.$set(e.localValue3,"vacationPaidType",t)},expression:"localValue3.vacationPaidType"}},[a("Radio",{attrs:{label:2}},[e._v("通常付与")]),a("Radio",{attrs:{label:1}},[e._v("比例付与")])],1)],1),a("FormItem",{attrs:{label:"既婚フラグ"}},[a("RadioGroup",{staticClass:"radio-fix",model:{value:e.localValue3.married,callback:function(t){e.$set(e.localValue3,"married",t)},expression:"localValue3.married"}},[a("Radio",{attrs:{label:0}},[e._v("独身")]),a("Radio",{attrs:{label:1}},[e._v("既婚")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:2===e.localValue1.gender,expression:"localValue1.gender === 2"}],attrs:{label:"妊娠日"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",value:e.localValue3.pregnancyDay,placeholder:"妊娠日"},on:{"on-change":function(t){e.localValue3.pregnancyDay=t}}})],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:2===e.localValue1.gender,expression:"localValue1.gender === 2"}],attrs:{label:"出産日"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy-MM-dd",value:e.localValue3.productionDay,placeholder:"出産日"},on:{"on-change":function(t){e.localValue3.productionDay=t}}})],1)],1),a("div",{staticClass:"my-footer"},[a("Button",{directives:[{name:"show",rawName:"v-show",value:0!==e.currentStep,expression:"currentStep !== 0"}],staticClass:"back-btn",attrs:{type:"primary"},on:{click:e.back}},[e._v("前へ")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:0===e.currentStep,expression:"currentStep === 0"}],staticClass:"back-btn",staticStyle:{visibility:"hidden"},attrs:{type:"primary"}},[e._v("前へ")]),2===e.currentStep&&e.isAdd?a("Button",{staticClass:"next-btn",attrs:{type:"success",loading:e.loading},on:{click:e.add}},[e._v("\n        登録\n      ")]):2!==e.currentStep||e.isAdd?a("Button",{staticClass:"next-btn",attrs:{type:"primary"},on:{click:e.next}},[e._v("次へ")]):a("Button",{staticClass:"next-btn",attrs:{type:"primary",loading:e.loading},on:{click:e.update}},[e._v("\n        更新\n      ")])],1)],1)],1)}),[],!1,null,"4b64b4d2",null);t.default=u.exports},6990:function(e,t,a){},7514:function(e,t,a){"use strict";var l=a("5ca1"),r=a("0a49")(5),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),l(l.P+l.F*i,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},bd83:function(e,t,a){}}]);